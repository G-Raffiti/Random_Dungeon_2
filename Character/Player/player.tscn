[gd_scene load_steps=37 format=3 uid="uid://c6dgijxtv53tk"]

[ext_resource type="Script" path="res://Character/Player/player.gd" id="1_q1xjo"]
[ext_resource type="PackedScene" uid="uid://dtqijsf4hb4gv" path="res://Effects/death_effect.tscn" id="2_7ybi8"]
[ext_resource type="Resource" uid="uid://dgn4d2na6mw6d" path="res://Character/Player/player_stats.tres" id="2_e6tyk"]
[ext_resource type="PackedScene" uid="uid://basneivfqtqrp" path="res://Character/Common/hurtbox.tscn" id="2_fbwjr"]
[ext_resource type="PackedScene" uid="uid://j4umo6y1d7jp" path="res://Character/Common/hitbox.tscn" id="3_debke"]
[ext_resource type="PackedScene" uid="uid://bgd4bx1wy1tjv" path="res://Effects/hurt_effect.tscn" id="3_stndc"]
[ext_resource type="Shader" path="res://Character/Player/player_shader.gdshader" id="4_cp3nk"]
[ext_resource type="Script" path="res://Character/Common/movement.gd" id="4_j2j8w"]
[ext_resource type="Texture2D" uid="uid://c7ke1wi2ecfqp" path="res://Character/Player/Art/Bob_Idle.png" id="5_crx8v"]
[ext_resource type="Script" path="res://Character/Player/player_ability_holder.gd" id="5_dhbqj"]
[ext_resource type="Script" path="res://Character/Player/player_state_machine.gd" id="6_r6r3x"]
[ext_resource type="Script" path="res://Character/Player/States/inactive_player_state.gd" id="9_opwty"]
[ext_resource type="Texture2D" uid="uid://b4p8404p1ffds" path="res://Character/Player/Art/Bob_Walk.png" id="9_p1m1e"]
[ext_resource type="Script" path="res://Character/Player/States/idle_player_state.gd" id="12_6livb"]
[ext_resource type="Script" path="res://Character/Player/States/walk_player_state.gd" id="14_agswa"]
[ext_resource type="Script" path="res://Global/Utils/audio_player_ramdom_pitch.gd" id="14_y643d"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_uujpw"]
radius = 14.0
height = 62.0

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_8gqwq"]
radius = 20.0
height = 110.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_3rsit"]
shader = ExtResource("4_cp3nk")
shader_parameter/color = Color(1, 1, 1, 1)
shader_parameter/progress = 0.0

[sub_resource type="Animation" id="Animation_3wnti"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../sprites/Sprite2D:material:shader_parameter/progress")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_cyyuq"]
resource_name = "blink_off"
length = 0.01
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../sprites/Sprite2D:material:shader_parameter/progress")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_y2jtb"]
resource_name = "blink_on"
length = 0.2
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../sprites/Sprite2D:material:shader_parameter/progress")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.0, 0.7, 0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_6o1v3"]
_data = {
"RESET": SubResource("Animation_3wnti"),
"blink_off": SubResource("Animation_cyyuq"),
"blink_on": SubResource("Animation_y2jtb")
}

[sub_resource type="Animation" id="Animation_62dsl"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../sprites/Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../sprites/Sprite2D:texture")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("5_crx8v")]
}

[sub_resource type="Animation" id="Animation_gaf0u"]
resource_name = "idle"
loop_mode = 1
step = 0.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../sprites/Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.45, 0.5, 0.55, 0.6, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 18, 19]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../sprites/Sprite2D:texture")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("5_crx8v")]
}

[sub_resource type="Animation" id="Animation_mp2s4"]
resource_name = "walk"
length = 1.711
loop_mode = 1
step = 0.029
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("../sprites/Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("9_p1m1e")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("../sprites/Sprite2D:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.029, 0.058, 0.087, 0.116, 0.145, 0.174, 0.203, 0.232, 0.261, 0.29, 0.319, 0.348, 0.377, 0.406, 0.435, 0.464, 0.493, 0.522, 0.551, 0.58, 0.609, 0.638, 0.667, 0.696, 0.725, 0.754, 0.783, 0.812, 0.841, 0.87, 0.899, 0.928, 0.957, 0.986, 1.015, 1.044, 1.073, 1.102, 1.131, 1.16, 1.189, 1.218, 1.247, 1.276, 1.305, 1.334, 1.363, 1.392, 1.421, 1.45, 1.479, 1.508, 1.537, 1.566, 1.595, 1.624, 1.653, 1.682),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_l8e67"]
_data = {
"RESET": SubResource("Animation_62dsl"),
"idle": SubResource("Animation_gaf0u"),
"walk": SubResource("Animation_mp2s4")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_oxdej"]
animation = &"RESET"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ykbv4"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_8x581"]
animation = &"walk"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_b4vtl"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_7tk5f"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_tkvwp"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_lsrv3"]

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_4yjai"]

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_iuxlo"]
states/RESET/node = SubResource("AnimationNodeAnimation_oxdej")
states/RESET/position = Vector2(465.778, 176.667)
states/Start/position = Vector2(467.062, 64.7407)
states/idle/node = SubResource("AnimationNodeAnimation_ykbv4")
states/idle/position = Vector2(686.667, 177.704)
states/walk/node = SubResource("AnimationNodeAnimation_8x581")
states/walk/position = Vector2(686.716, 35.3333)
transitions = ["RESET", "idle", SubResource("AnimationNodeStateMachineTransition_b4vtl"), "idle", "RESET", SubResource("AnimationNodeStateMachineTransition_7tk5f"), "Start", "idle", SubResource("AnimationNodeStateMachineTransition_tkvwp"), "idle", "walk", SubResource("AnimationNodeStateMachineTransition_lsrv3"), "walk", "idle", SubResource("AnimationNodeStateMachineTransition_4yjai")]

[node name="player" type="CharacterBody2D" node_paths=PackedStringArray("rotation_part", "movement", "hurtbox", "hitbox", "ability_holder", "state_machine", "sound", "hit_sound", "hit_anim", "anim", "anim_tree", "sprites")]
top_level = true
collision_layer = 257
collision_mask = 51
script = ExtResource("1_q1xjo")
player_stats = ExtResource("2_e6tyk")
rotation_part = NodePath("sprites/rotation_part")
movement = NodePath("movement")
hurtbox = NodePath("hurtbox")
hitbox = NodePath("hitbox")
ability_holder = NodePath("ability_holder")
state_machine = NodePath("state_machine")
sound = NodePath("animation_&_sound/sound")
hit_sound = NodePath("animation_&_sound/hit_sound")
hit_anim = NodePath("animation_&_sound/hit_anim")
anim = NodePath("animation_&_sound/AnimationPlayer")
anim_tree = NodePath("animation_&_sound/AnimationTree")
sprites = NodePath("sprites")
death_effect_ps = ExtResource("2_7ybi8")
hurt_effect_ps = ExtResource("3_stndc")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -8)
rotation = 1.5708
shape = SubResource("CapsuleShape2D_uujpw")
debug_color = Color(0.537255, 0.537255, 0.529412, 0.419608)

[node name="hurtbox" parent="." instance=ExtResource("2_fbwjr")]
collision_layer = 4
collision_mask = 128

[node name="hurtbox_collision" type="CollisionShape2D" parent="hurtbox"]
position = Vector2(0, -57)
shape = SubResource("CapsuleShape2D_8gqwq")
debug_color = Color(0.364706, 0.615686, 0, 0.419608)

[node name="hitbox" parent="." instance=ExtResource("3_debke")]
collision_layer = 8
collision_mask = 64

[node name="hitbox_collision" type="CollisionPolygon2D" parent="hitbox"]
polygon = PackedVector2Array(-3, -71, 78, -71, 78, -45, -3, -45)

[node name="sprites" type="Node2D" parent="."]

[node name="rotation_part" type="Node2D" parent="sprites"]

[node name="Sprite2D" type="Sprite2D" parent="sprites"]
light_mask = 2
texture_filter = 1
material = SubResource("ShaderMaterial_3rsit")
texture = ExtResource("5_crx8v")
flip_h = true
hframes = 8
vframes = 8

[node name="movement" type="Node" parent="."]
script = ExtResource("4_j2j8w")

[node name="ability_holder" type="Node" parent="."]
script = ExtResource("5_dhbqj")

[node name="state_machine" type="Node2D" parent="."]
script = ExtResource("6_r6r3x")

[node name="inactive_state" type="Node2D" parent="state_machine"]
script = ExtResource("9_opwty")

[node name="idle_state" type="Node2D" parent="state_machine"]
script = ExtResource("12_6livb")

[node name="walk_state" type="Node2D" parent="state_machine"]
script = ExtResource("14_agswa")

[node name="animation_&_sound" type="Node" parent="."]

[node name="sound" type="AudioStreamPlayer2D" parent="animation_&_sound"]
script = ExtResource("14_y643d")

[node name="hit_sound" type="AudioStreamPlayer2D" parent="animation_&_sound"]
script = ExtResource("14_y643d")

[node name="hit_anim" type="AnimationPlayer" parent="animation_&_sound"]
autoplay = "blink_off"
libraries = {
"": SubResource("AnimationLibrary_6o1v3")
}

[node name="AnimationPlayer" type="AnimationPlayer" parent="animation_&_sound"]
autoplay = "RESET"
libraries = {
"": SubResource("AnimationLibrary_l8e67")
}

[node name="AnimationTree" type="AnimationTree" parent="animation_&_sound"]
tree_root = SubResource("AnimationNodeStateMachine_iuxlo")
anim_player = NodePath("../AnimationPlayer")
